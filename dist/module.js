/*! For license information please see module.js.LICENSE.txt */
define(["react","d3","emotion","@grafana/data","@grafana/ui"],(function(e,t,a,n,l){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=5)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t){e.exports=n},function(e,t){e.exports=l},function(e,t,a){"use strict";a.r(t);var n=a(3);function l(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,l,r=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(e){l={error:e}}finally{try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(l)throw l.error}}return o}function r(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var o,i,s,c,u,d,m,f,p,b=a(0),g=a.n(b),h=a(2),v=a(4),x=a(1),y=function(e,t,a){var n;return n="bottom"===e?x.axisBottom(t):x.axisLeft(t),"logarithmic"===a&&(n=n.ticks(10,"~s")),n},w=function(e){var t=[];switch(e){case"plasma":t=["#0d0887","#5302a3","#8b0aa5","#b83289","#db5c68","#f48849","#febd2a","#f0f921"];break;case"turbo":t=["#23171b","#4076f5","#26d0cd","#5ffc73","#cbe839","#ff9b21","#d6390f","#900c00"];break;case"warm":t=["#6e40aa","#a83cb3","#df40a1","#ff507a","#ff704e","#f89b31","#d2c934","#aff05b"];break;case"spectral":t=["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"]}return t},O=function(e,t){return 0===e&&"logarithmic"===t?1e-6:e},j=function(e){return"linear"===e?x.scaleLinear:x.scaleLog},M=function(e,t){return"logarithmic"===e&&x.min(t)<0},E=Object(v.stylesFactory)((function(){return{wrapper:Object(h.css)(o||(o=r(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(h.css)(i||(i=r(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),legend:Object(h.css)(s||(s=r(["\n      height: 80%;\n      position: absolute;\n      right: 20px;\n      width: 12px;\n    "],["\n      height: 80%;\n      position: absolute;\n      right: 20px;\n      width: 12px;\n    "]))),legendLabel:Object(h.css)(c||(c=r(["\n      writing-mode: tb-rl;\n      transform: rotate(-180deg);\n      position: absolute;\n      left: 12px;\n      font-size: 0.8em;\n      height: 100%;\n    "],["\n      writing-mode: tb-rl;\n      transform: rotate(-180deg);\n      position: absolute;\n      left: 12px;\n      font-size: 0.8em;\n      height: 100%;\n    "]))),legendLabelFrom:Object(h.css)(u||(u=r(["\n      position: absolute;\n      text-align: start;\n      height: 100%;\n    "],["\n      position: absolute;\n      text-align: start;\n      height: 100%;\n    "]))),legendLabelTo:Object(h.css)(d||(d=r(["\n      position: absolute;\n      text-align: end;\n      height: 100%;\n    "],["\n      position: absolute;\n      text-align: end;\n      height: 100%;\n    "]))),btnModalClose:Object(h.css)(m||(m=r(["\n      margin-top: 20px;\n    "],["\n      margin-top: 20px;\n    "]))),bottomXaxisLabel:Object(h.css)(f||(f=r(["\n      bottom: 8px;\n      width: 100%;\n    "],["\n      bottom: 8px;\n      width: 100%;\n    "])))}})),L=function(e){var t=[],a=[];return e.forEach((function(e){var l=e.fields.find((function(e){return e.type===n.FieldType.number})),r=e.fields.find((function(e){return e.type===n.FieldType.time}));l&&r&&(t.push(l.values.toArray()),a.push(r.values.toArray()))})),[t,a]};a.d(t,"plugin",(function(){return S}));var S=new n.PanelPlugin((function(e){var t,a,o=e.options,i=e.data,s=e.width,c=e.height,u=E(),d=o.circleRadius,m=[];t=l(L(i.series),2),m=t[0],a=t[1];var f,S=50,N=30,T=s-(S+30),k=c-(N+50),P=m.length>1?x.min(m[0]):0,R=m.length>1?x.max(m[0]):100,X=j(o.scaleModeX)().domain([O(P,o.scaleModeX),R]).range([0,T]).clamp(!0).nice(),Y=y("bottom",X,o.scaleModeX),C=m.length>1?x.min(m[1]):0,H=m.length>1?x.max(m[1]):100,_=j(o.scaleModeY)().domain([O(C,o.scaleModeY),H]).range([k,0]).clamp(!0),F=y("left",_,o.scaleModeY),V=a.length>1?x.min(a[0]):0,A=a.length>1?x.max(a[0]):100,B=x.scaleQuantize().range(w(o.colorRange)).domain([V,A]),D={background:"linear-gradient(to top,"+w(o.colorRange).join(",")+")"},z=M(o.scaleModeX,m[0])||M(o.scaleModeY,m[1]),W=l(Object(b.useState)(z),2),Q=W[0],q=W[1],G=function(){q(!1)},I=l(Object(b.useState)({x:0,y:0,posLeft:0,posTop:0,dateTime:""}),2),J=I[0],K=I[1],U=l(Object(b.useState)(!0),2),Z=U[0],$=U[1],ee=function(){setTimeout((function(){return $(!0)}),500)};return g.a.createElement("div",{className:Object(h.cx)(u.wrapper,Object(h.css)(p||(p=r(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),s,c))},g.a.createElement(v.Modal,{className:"modal",title:"Warning",isOpen:Q,onDismiss:G},"One of your time series contains negative values and can't be displayed on a logarithmic scale. Please select a linear scale.",g.a.createElement("div",null,g.a.createElement(v.Button,{className:u.btnModalClose,variant:"primary",onClick:G},"Close"))),g.a.createElement("div",{className:"graph-tooltip grafana-tooltip",hidden:Z,style:{left:J.posLeft+"px",top:J.posTop+"px"}},g.a.createElement("div",{className:"graph-tooltip-time"},J.dateTime),[J.x,J.y].map((function(e,t){return g.a.createElement("div",{className:"graph-tooltip-list-item",key:"valueSeries"+t},g.a.createElement("div",{className:"graph-tooltip-series-name"},void 0!==i.series[t]&&"name"in i.series[t]?i.series[t].name:""),g.a.createElement("div",{className:"graph-tooltip-value"},e))}))),g.a.createElement("svg",{className:u.svg,width:s,height:c,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 "+s+" "+c},g.a.createElement("g",{transform:"translate("+S+", "+N+")"},g.a.createElement("g",null,(f=a,m.length>1&&f.length>1?m[0].map((function(e,t){return g.a.createElement("circle",{key:"circle-"+t,transform:"translate("+X(e)+", "+_(m[1][t])+")",style:{fill:""+B(a[0][t])},"data-values":e+", "+m[1][t],r:d,stroke:"white",strokeOpacity:"0",strokeWidth:"5",onMouseMove:function(){return l=e,r=m[1][t],o=X(e),i=_(m[1][t]),s=a[0][t],K({x:l,y:r,posLeft:o+70,posTop:i+20,dateTime:Object(n.dateTime)(s).format("Y-M-D HH:mm:ss")}),void $(!1);var l,r,o,i,s},onMouseOut:ee})})):g.a.createElement("text",{transform:"translate("+(T/2-20)+", "+(k/2-20)+")"},"No data"))),g.a.createElement("g",{transform:"translate(0, "+k+")",ref:function(e){x.select(e).call(Y)}}),g.a.createElement("g",{ref:function(e){x.select(e).call(F)}}))),g.a.createElement("div",{className:"axisLabel left-yaxis-label"},i.series.length>1?i.series[0].name:""),g.a.createElement("div",{className:"axisLabel "+u.bottomXaxisLabel},i.series.length>1?i.series[1].name:""),o.showLegend?g.a.createElement("div",{className:u.legend,style:D},g.a.createElement("div",{className:u.legendLabel},g.a.createElement("div",{className:u.legendLabelFrom},i.timeRange.from.format("Y-M-D HH:mm:ss")),g.a.createElement("div",{className:u.legendLabelTo},i.timeRange.to.format("Y-M-D HH:mm:ss")))):g.a.createElement("div",null))})).setPanelOptions((function(e){return e.addSelect({path:"colorRange",defaultValue:"warm",name:"Color Range",settings:{options:[{value:"plasma",label:"Plasma"},{value:"spectral",label:"Spectral"},{value:"turbo",label:"Turbo"},{value:"warm",label:"Warm"}]}}).addSelect({path:"circleRadius",defaultValue:"1",name:"Circle Radius",settings:{options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}]}}).addRadio({path:"scaleModeX",defaultValue:"linear",name:"X-Axis: Scale Mode",settings:{options:[{value:"linear",label:"Linear"},{value:"logarithmic",label:"Logarithmic"}]}}).addRadio({path:"scaleModeY",defaultValue:"linear",name:"Y-Axis: Scale Mode",settings:{options:[{value:"linear",label:"Linear"},{value:"logarithmic",label:"Logarithmic"}]}}).addBooleanSwitch({path:"showLegend",defaultValue:!0,name:"Show Legend"})}))}])}));
//# sourceMappingURL=module.js.map